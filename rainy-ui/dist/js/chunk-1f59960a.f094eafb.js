(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f59960a","chunk-2d0e502d"],{"4c39":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=this,t=a.$createElement,r=a._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{attrs:{layout:"inline"}},[r("a-row",{attrs:{gutter:48}},[r("a-col",{attrs:{md:6,sm:48}},[r("a-form-item",{attrs:{label:"操作人"}},[r("a-input",{attrs:{placeholder:"请输入操作人"},model:{value:a.queryParam.username,callback:function(e){a.$set(a.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),r("a-col",{attrs:{md:6,sm:24}},[r("a-form-item",{attrs:{label:"操作类型"}},[r("a-select",{attrs:{placeholder:"请选择操作类型"},model:{value:a.queryParam.operationTypeCode,callback:function(e){a.$set(a.queryParam,"operationTypeCode",e)},expression:"queryParam.operationTypeCode"}},a._l(a.$options.filters.dictItems("SYS_OPERATION_LOG_TYPE"),(function(e){return r("a-select-option",{key:e.value,attrs:{value:e.value}},[a._v(" "+a._s(e.name)+" ")])})),1)],1)],1),r("a-col",{attrs:{md:6,sm:24}},[r("a-range-picker",{attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["开始时间","结束时间"]},on:{change:a.handleDateOk}})],1),r("a-col",{attrs:{md:6,sm:24}},[r("span",{staticClass:"table-page-search-submitButtons"},[r("a-button",{attrs:{type:"primary"},on:{click:function(e){return a.$refs.table.refresh()}}},[a._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){a.queryParam={}}}},[a._v("重置")])],1)])],1)],1)],1),r("s-table",{ref:"table",attrs:{rowKey:function(e){return e.id},alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},columns:a.columns,data:a.loadData,"row-selection":{selectedRowKeys:a.selectedRowKeys,onChange:a.handleChange},showPagination:!0,expandRowByClick:!0},on:{change:a.handleChange},scopedSlots:a._u([{key:"operationTypeCode",fn:function(e){return r("span",{},[a._v(" "+a._s(a._f("dictItemValue")("SYS_OPERATION_LOG_TYPE",e))+" ")])}},{key:"success",fn:function(e){return r("span",{},[e?r("a-tag",{attrs:{color:"#87d068"}},[a._v(" "+a._s(a._f("dictItemValue")("SYS_SUCCESS_FAIL",e))+" ")]):a._e(),e?a._e():r("a-tag",{attrs:{color:"#f50"}},[a._v(" "+a._s(a._f("dictItemValue")("SYS_SUCCESS_FAIL",e))+" ")])],1)}},{key:"operation",fn:function(e,t){return r("span",{},[[r("a",{on:{click:function(e){return a.$refs.detail.open(t)}}},[a._v("查看详情")]),r("a-divider",{attrs:{type:"vertical"}}),r("a-popconfirm",{attrs:{placement:"topRight",title:"确定删除这条操作日志吗?"},on:{confirm:function(e){return a.del(t.id)}}},[r("a",[a._v("删除")])])]],2)}}])},[r("template",{slot:"operator"},[r("a-popconfirm",{attrs:{disabled:a.selectedRowKeys.length<1,placement:"topRight",title:"确定批量删除操作日志吗?"},on:{confirm:a.batchDel}},[r("a-button",{attrs:{type:"danger",disabled:a.selectedRowKeys.length<1}},[r("a-icon",{attrs:{type:"delete"}}),a._v("批量删除")],1)],1),r("a-popconfirm",{attrs:{placement:"topRight",title:"确定清空日志吗?"},on:{confirm:a.clear}},[r("a-button",{attrs:{type:"danger"}},[r("a-icon",{attrs:{type:"delete"}}),a._v("清空日志")],1)],1)],1)],2),r("detail",{ref:"detail",on:{ok:a.handleOk}})],1)},o=[],l=t("2af9"),s=t("9352"),i=(t("99af"),t("b775")),n={List:"/operationLogs",Update:"/operationLog",BatchDel:"/operationLogs",Clear:"/operationLogs/clear"};function c(e){return Object(i["b"])({url:n.List,method:"get",params:e})}function m(e){return Object(i["b"])({url:"".concat(n.Update,"/").concat(e),method:"delete"})}function d(e){return Object(i["b"])({url:n.BatchDel,method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(){return Object(i["b"])({url:n.Clear,method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8"}})}var u={name:"Position",components:{STable:l["m"],detail:s["default"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"系统模块",dataIndex:"module"},{title:"操作类型",dataIndex:"operationTypeCode",scopedSlots:{customRender:"operationTypeCode"}},{title:"操作人",dataIndex:"username"},{title:"操作时间",dataIndex:"datetime"},{title:"详情",dataIndex:"detail"},{title:"是否成功",dataIndex:"success",scopedSlots:{customRender:"success"}},{title:"操作",scopedSlots:{customRender:"operation"},width:"150px"}],loadData:function(a){return c(Object.assign(a,e.queryParam)).then((function(e){return e}))},selectedRowKeys:[],selectedRows:[]}},methods:{handleOk:function(){this.$refs.table.refresh(),this.$refs.table.clearSelected()},handleChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},handleDateOk:function(e,a){this.queryParam.startTime=a[0],this.queryParam.endTime=a[1]},del:function(e){var a=this;m(e).then((function(e){e.success?(a.$message.success("删除成功"),a.handleOk()):a.$message.error("删除失败："+e.message)}))},batchDel:function(){var e=this;d(this.selectedRowKeys).then((function(a){a.success?(e.$message.success("删除成功"),e.$refs.table.clearSelected(),e.handleOk()):e.$message.error("删除失败："+a.message)}))},clear:function(){var e=this;p().then((function(a){a.success?(e.$message.success("删除成功"),e.$refs.table.clearSelected(),e.handleOk()):e.$message.error("删除失败："+a.message)}))}}},f=u,h=(t("ff3c"),t("2877")),b=Object(h["a"])(f,r,o,!1,null,null,null);a["default"]=b.exports},9352:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"查看操作日志详情",width:1e3,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"操作人",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"操作时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["datetime"],expression:"['datetime']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"系统模块",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["module"],expression:"['module']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"操作类型",hasFeedback:""}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["operationTypeCode"],expression:"['operationTypeCode']"}]},e._l(e.$options.filters.dictItems("SYS_OPERATION_LOG_TYPE"),(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value},on:{click:function(t){return e.selectMenuType(a.value)}}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"操作详情",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["detail"],expression:"['detail']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"执行时长",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["processTime"],expression:"['processTime']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"请求路径",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path"],expression:"['path']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"请求方法",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["method"],expression:"['method']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"ip地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remoteIp"],expression:"['remoteIp']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"浏览器",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["browser"],expression:"['browser']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"操作系统",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["os"],expression:"['os']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"class类名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["className"],expression:"['className']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"方法名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["methodName"],expression:"['methodName']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"方法参数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["params"],expression:"['params']"}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"返回结果",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["result"],expression:"['result']"}]})],1)],1)],1)],1)],1)],1)},o=[],l=t("13bb"),s={name:"OperationLogDetail",components:{IconSelector:l["a"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,formLoading:!1,form:this.$form.createForm(this)}},methods:{open:function(e){this.visible=!0,this.form.getFieldDecorator("id",{initialValue:e.id}),this.form.getFieldDecorator("username",{initialValue:e.username}),this.form.getFieldDecorator("datetime",{initialValue:e.datetime}),this.form.getFieldDecorator("module",{initialValue:e.module}),this.form.getFieldDecorator("operationTypeCode",{initialValue:e.operationTypeCode}),this.form.getFieldDecorator("detail",{initialValue:e.detail}),this.form.getFieldDecorator("processTime",{initialValue:e.processTime}),this.form.getFieldDecorator("path",{initialValue:e.path}),this.form.getFieldDecorator("method",{initialValue:e.method}),this.form.getFieldDecorator("remoteIp",{initialValue:e.remoteIp}),this.form.getFieldDecorator("browser",{initialValue:e.browser}),this.form.getFieldDecorator("os",{initialValue:e.os}),this.form.getFieldDecorator("className",{initialValue:e.className}),this.form.getFieldDecorator("methodName",{initialValue:e.methodName}),this.form.getFieldDecorator("params",{initialValue:e.params}),this.form.getFieldDecorator("result",{initialValue:e.result})},setFieldValue:function(e,a){this.form.resetFields("".concat(e),[]),this.form.getFieldDecorator(e,{initialValue:a})},handleSubmit:function(){this.handleCancel()},handleCancel:function(){this.form.resetFields(),this.confirmLoading=!1,this.visible=!1}}},i=s,n=t("2877"),c=Object(n["a"])(i,r,o,!1,null,null,null);a["default"]=c.exports},f392:function(e,a,t){},ff3c:function(e,a,t){"use strict";t("f392")}}]);