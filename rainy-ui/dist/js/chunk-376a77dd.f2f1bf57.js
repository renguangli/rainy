(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-376a77dd","chunk-ba5df2b2","chunk-6d0074d9"],{"1f27":function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));n("99af");var a=n("b775"),r={Menus:"/menus/antdv",MenuList:"/menus/tree",MenuTree:"/menus/tree",Update:"/menu"};function s(e){return Object(a["b"])({url:r.MenuTree,method:"get",params:e})}function o(e){return Object(a["b"])({url:r.MenuList,method:"get",params:e})}function i(e){return Object(a["b"])({url:r.Update,method:"POST",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["b"])({url:"".concat(r.Update,"/").concat(e),method:"delete"})}function l(e){return Object(a["b"])({url:r.Update,method:"PUT",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},9477:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"角色名称"}},[a("a-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"角色编码"}},[a("a-input",{attrs:{placeholder:"请输入角色编码"},model:{value:t.queryParam.code,callback:function(e){t.$set(t.queryParam,"code",e)},expression:"queryParam.code"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh()}}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.queryParam={}}}},[t._v("重置")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{rowKey:function(e){return e.id},alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},columns:t.columns,data:t.loadData,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.handleChange},showPagination:!0,expandRowByClick:!0},on:{change:t.handleChange},scopedSlots:t._u([{key:"operation",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.$refs.editor.open(1,n)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(e){return t.$refs.menuAssign.open(n)}}},[t._v("分配菜单")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{placement:"topRight",title:"确定删除角色["+n.name+"]吗?"},on:{confirm:function(e){return t.del(n.id)}}},[a("a",[t._v("删除")])])],1)],1)],1)]],2)}}])},[a("template",{slot:"operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$refs.editor.open(0)}}},[t._v("新增角色")]),a("a-popconfirm",{attrs:{disabled:t.selectedRowKeys.length<1,placement:"topRight",title:"确定批量删除角色吗?"},on:{confirm:t.batchDel}},[a("a-button",{attrs:{type:"danger",disabled:t.selectedRowKeys.length<1}},[a("a-icon",{attrs:{type:"delete"}}),t._v("批量删除")],1)],1)],1)],2),a("editor",{ref:"editor",on:{ok:t.handleOk}}),a("menuAssign",{ref:"menuAssign",on:{ok:t.handleOk}})],1)},r=[],s=n("2af9"),o=n("cc5e"),i=n("d5a0"),c=n("bea9"),l={name:"Role",components:{STable:s["m"],editor:i["default"],menuAssign:c["default"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"角色名称",dataIndex:"name"},{title:"角色编码",dataIndex:"code"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"createTime",checked:!1},{title:"创建者",dataIndex:"createBy",checked:!1},{title:"更新时间",dataIndex:"updateTime",checked:!1},{title:"更新者",dataIndex:"updateBy",checked:!1},{title:"操作",scopedSlots:{customRender:"operation"},width:"150px"}],loadData:function(t){return Object(o["g"])(Object.assign(t,e.queryParam)).then((function(e){return e}))},selectedRowKeys:[],selectedRows:[]}},methods:{handleOk:function(){this.$refs.table.refresh(),this.$refs.table.clearSelected()},handleChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},del:function(e){var t=this;Object(o["d"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.handleOk()):t.$message.error("删除失败："+e.message)}))},batchDel:function(){var e=this;Object(o["c"])(this.selectedRowKeys).then((function(t){t.success?(e.$message.success("删除成功"),e.$refs.table.clearSelected(),e.handleOk()):e.$message.error("删除失败："+t.message)}))}}},d=l,u=(n("db84"),n("2877")),m=Object(u["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},"9a0ce":function(e,t,n){},bea9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"分配菜单",width:350,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.formLoading}},[n("a-tree",{attrs:{treeData:e.menuTree,defaultExpandAll:!1,replaceFields:e.replaceFields,selectedKeys:e.checkedKeys,checkable:!0},on:{check:e.handleCheck},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)],1)},r=[],s=(n("d3b7"),n("1f27")),o=n("cc5e"),i={name:"MenuAssign",data:function(){return{visible:!1,confirmLoading:!1,formLoading:!1,replaceFields:{key:"id"},checkedKeys:[],halfCheckedKeys:[],menuTree:[],record:{}}},methods:{open:function(e){this.record=e,this.visible=!0,this.getMenuTree()},getMenuTree:function(){var e=this;this.formLoading=!0,Object(s["d"])().then((function(t){t.success?(e.menuTree=t.data,e.getMenuIds()):e.$message.warning(t.message)})).finally((function(){e.formLoading=!1}))},getMenuIds:function(){var e=this;Object(o["f"])(this.record.id).then((function(t){t.success?e.checkedKeys=t.data:e.$message.warning(t.message)}))},handleCheck:function(e,t){this.halfCheckedKeys=t.halfCheckedKeys},getRoleMenuList:function(){var e=[];for(var t in this.checkedKeys){var n={roleId:this.record.id,menuId:this.checkedKeys[t],all:!0};e.push(n)}for(var a in this.halfCheckedKeys){var r={roleId:this.record.id,menuId:this.halfCheckedKeys[a],all:!1};e.push(r)}return e},handleSubmit:function(){var e=this;this.confirmLoading=!0,Object(o["b"])(this.record.id,this.getRoleMenuList()).then((function(t){t.success?(e.$message.info("分配成功"),e.handleCancel()):e.$message.error("分配失败"+t.message)})).finally((function(){e.confirmLoading=!1}))},handleCancel:function(){this.visible=!1,this.formLoading=!1,this.confirmLoading=!1,this.checkedKeys=[],this.roleMenuList=[]}}},c=i,l=n("2877"),d=Object(l["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},cc5e:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u}));n("99af");var a=n("b775"),r={List:"/roles",Update:"/role",BatchDel:"/roles"};function s(e){return Object(a["b"])({url:"".concat(r.Update,"/").concat(e,"/menuIds"),method:"get"})}function o(e){return Object(a["b"])({url:r.List,method:"get",params:e})}function i(e){return Object(a["b"])({url:r.Update,method:"POST",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["b"])({url:"".concat(r.Update,"/").concat(e),method:"delete"})}function l(e){return Object(a["b"])({url:r.BatchDel,method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["b"])({url:r.Update,method:"PUT",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e,t){return Object(a["b"])({url:"".concat(r.Update,"/").concat(e,"/menus"),method:"POST",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},d5a0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:(0===e.flag?"新增":"编辑")+"角色",width:500,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.formLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),n("a-form-item",{attrs:{label:"角色名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:1,message:"请输入角色名称！"}]}],expression:"['name',{rules: [{required: true, min: 1, message: '请输入角色名称！'}]}]"}],attrs:{placeholder:"请输入角色名称"}})],1),n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色编码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入角色编码！"}]}],expression:"['code', {rules: [{required: true, message: '请输入角色编码！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入角色编码",min:1,max:1e4}})],1),n("a-form-item",{attrs:{label:"描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{rows:4,placeholder:"请输入描述"}})],1)],1)],1)],1)},r=[],s=(n("b0c0"),n("a4d3"),n("e01a"),n("d3b7"),n("cc5e")),o={name:"RoleEdit",data:function(){return{labelCol:{xs:{span:24},sm:{span:"5"}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,formLoading:!1,confirmLoading:!1,form:this.$form.createForm(this),flag:0}},mounted:function(){},methods:{open:function(e,t){this.visible=!0,this.flag=e,0!==e&&(this.form.getFieldDecorator("id",{initialValue:t.id}),this.form.getFieldDecorator("name",{initialValue:t.name}),this.form.getFieldDecorator("code",{initialValue:t.code}),this.form.getFieldDecorator("description",{initialValue:t.description}))},handleOk:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,n){t?e.confirmLoading=!1:0===e.flag?e.add(n):e.edit(n)}))},handleCancel:function(){this.form.resetFields(),this.confirmLoading=!1,this.visible=!1},add:function(e){var t=this;Object(s["a"])(e).then((function(n){n.success?(t.$message.success("新增成功"),t.$emit("ok",e),t.handleCancel()):t.$message.error("新增失败："+n.message)})).finally((function(e){t.confirmLoading=!1}))},edit:function(e){var t=this;Object(s["e"])(e).then((function(n){n.success?(t.$message.success("编辑成功"),t.$emit("ok",e),t.handleCancel()):t.$message.error("编辑失败："+n.message)})).finally((function(e){t.confirmLoading=!1}))}}},i=o,c=n("2877"),l=Object(c["a"])(i,a,r,!1,null,null,null);t["default"]=l.exports},db84:function(e,t,n){"use strict";n("9a0ce")}}]);