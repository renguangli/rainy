(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bc52fdb"],{"24fd":function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return d}));r("99af");var a=r("b775"),n={OrgTree:"/orgs/tree",List:"/orgs",Update:"/org",BatchDel:"/orgs"};function o(){return Object(a["b"])({url:n.OrgTree,method:"GET"})}function i(e){return Object(a["b"])({url:n.List,method:"get",params:e})}function s(e){return Object(a["b"])({url:n.Update,method:"POST",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e),method:"delete"})}function c(e){return Object(a["b"])({url:n.BatchDel,method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["b"])({url:n.Update,method:"PUT",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"4daa":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:(0===e.flag?"新增":"编辑")+"用户",width:500,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.formLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),r("a-form-item",{attrs:{label:"用户名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,min:1,message:"请输入用户名！"}]}],expression:"['username',{rules: [{required: true, min: 1, message: '请输入用户名！'}]}]"}],attrs:{placeholder:"请输入用户名"}})],1),r("a-form-item",{attrs:{label:"密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,min:1,message:"请输入密码！"}]}],expression:"['password',{rules: [{required: true, min: 1, message: '请输入密码！'}]}]"}],attrs:{type:"password",placeholder:"请输入密码"}})],1),r("a-form-item",{attrs:{label:"组织机构",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgId",{rules:[{required:!0,message:"请选择组织机构！"}]}],expression:"['orgId', {rules: [{ required: true, message: '请选择组织机构！' }]}]"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"300px",overflow:"auto"},treeData:e.orgTree,"replace-fields":e.replaceFields,placeholder:"请选择组织机构",treeDefaultExpandAll:""}})],1),r("a-form-item",{attrs:{label:"职位",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["positionId",{rules:[{required:!0,message:"请选择职位！"}]}],expression:"['positionId', {rules: [{ required: true, message: '请选择职位！' }]}]"}],attrs:{"show-search":"",placeholder:"请选择职位","option-filter-prop":"children","filter-option":e.filterOption},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},e._l(e.positions,(function(t){return r("a-select-option",{key:t.name,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),r("a-form-item",{attrs:{label:"昵称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:1,message:"请输入昵称！"}]}],expression:"['name',{rules: [{required: true, min: 1, message: '请输入昵称！'}]}]"}],attrs:{placeholder:"请输入昵称"}})],1),r("a-form-item",{attrs:{label:"手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["telephone",{rules:[{required:!0,min:1,message:"请输入手机号！"}]}],expression:"['telephone',{rules: [{required: true, min: 1, message: '请输入手机号！'}]}]"}],attrs:{placeholder:"请输入手机号"}})],1),r("a-form-item",{attrs:{label:"邮箱",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,min:1,message:"请输入邮箱！"},{type:"email",message:"邮箱格式不正确"}]}],expression:"['email',{rules: [{required: true, min: 1, message: '请输入邮箱！'},{type: 'email', message: '邮箱格式不正确'}]}]"}],attrs:{placeholder:"请输入邮箱"}})],1)],1)],1)],1)},n=[],o=(r("b0c0"),r("d3b7"),r("24fd")),i=r("6e6f"),s=r("c24f"),l={name:"UserEdit",data:function(){return{labelCol:{xs:{span:24},sm:{span:"5"}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,formLoading:!1,confirmLoading:!1,replaceFields:{title:"name",key:"id",value:"id"},orgTree:[],positions:[],form:this.$form.createForm(this),flag:0}},mounted:function(){},methods:{open:function(e,t){this.visible=!0,this.getOrgTree(),this.getPositions(),this.flag=e,0!==e&&(this.form.getFieldDecorator("id",{initialValue:t.id}),this.form.getFieldDecorator("username",{initialValue:t.username}),this.form.getFieldDecorator("password",{initialValue:t.password}),this.form.getFieldDecorator("orgId",{initialValue:t.orgId}),this.form.getFieldDecorator("positionId",{initialValue:t.positionId}),this.form.getFieldDecorator("name",{initialValue:t.name}),this.form.getFieldDecorator("telephone",{initialValue:t.telephone}),this.form.getFieldDecorator("email",{initialValue:t.email}))},handleOk:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,r){t?e.confirmLoading=!1:0===e.flag?e.add(r):e.edit(r)}))},handleCancel:function(){this.form.resetFields(),this.confirmLoading=!1,this.visible=!1},getOrgTree:function(){var e=this;this.formLoading=!0,Object(o["e"])().then((function(t){t.success?e.orgTree=t.data:e.$message.warning(t.message)})).finally((function(){e.formLoading=!1}))},getPositions:function(){var e=this;Object(i["e"])({paged:!1}).then((function(t){t.success?e.positions=t.data.records:e.$message.warning(t.message)}))},handleChange:function(e){console.log("selected ".concat(e))},handleBlur:function(){console.log("blur")},handleFocus:function(){console.log("focus")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},add:function(e){var t=this;e.avatar="/avatar.jpg",Object(s["a"])(e).then((function(r){r.success?(t.$message.success("新增成功"),t.$emit("ok",e),t.handleCancel()):t.$message.error("新增失败："+r.message)})).finally((function(e){t.confirmLoading=!1}))},edit:function(e){var t=this;Object(s["e"])(e).then((function(r){r.success?(t.$message.success("编辑成功"),t.$emit("ok",e),t.handleCancel()):t.$message.error("编辑失败："+r.message)})).finally((function(e){t.confirmLoading=!1}))}}},c=l,d=r("2877"),u=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},"6e6f":function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return c}));r("99af");var a=r("b775"),n={List:"/positions",Update:"/position",BatchDel:"/positions"};function o(e){return Object(a["b"])({url:n.List,method:"get",params:e})}function i(e){return Object(a["b"])({url:n.Update,method:"POST",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e),method:"delete"})}function l(e){return Object(a["b"])({url:n.BatchDel,method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["b"])({url:n.Update,method:"PUT",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},c24f:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"h",(function(){return p}));r("99af");var a=r("b775"),n={List:"/users",Update:"/user",BatchDel:"/users"};function o(e){return Object(a["b"])({url:n.List,method:"get",params:e})}function i(e){return Object(a["b"])({url:n.Update,method:"POST",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e),method:"delete"})}function l(e){return Object(a["b"])({url:n.BatchDel,method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["b"])({url:n.Update,method:"PUT",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e,"/roleIds"),method:"GET"})}function u(e,t){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e,"/roles"),method:"POST",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(a["b"])({url:"".concat(n.Update,"/").concat(e,"/password/reset"),method:"put"})}}}]);